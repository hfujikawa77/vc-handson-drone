# ドローンWeb制御アプリケーション

## 概要

本アプリケーションは、既存のPymavlinkを使用したCLIドローン制御アプリケーションをWebブラウザから操作できるようにするものです。PythonバックエンドとHTML+JavaScriptフロントエンドで構成され、ドローンの状態表示（地図上での位置表示を含む）とコマンド送信をリアルタイムで行います。

## 機能

*   ドローンへの接続/切断
*   モーターのアーム/ディスアーム
*   指定高度への離陸
*   指定座標への移動
*   着陸
*   フライトモードの変更
*   ドローンの現在位置を地図上にリアルタイム表示
*   ドローンのアーム状態、フライトモード、緯度、経度、高度をリアルタイム表示

## 技術スタック

*   **バックエンド**: Python (FastAPI, Uvicorn, Pymavlink, WebSockets)
*   **フロントエンド**: HTML, JavaScript (Leaflet.js for map), CSS

## 起動方法

### 1. 前提条件

*   Python 3.7以上がインストールされていること。
*   Mission Plannerなどのシミュレーターが起動しており、`tcp:127.0.0.1:5762` で接続可能であること。

### 2. バックエンドのセットアップと起動

1.  `drone-web-app/backend` ディレクトリに移動します。
    ```bash
    cd drone-web-app/backend
    ```
2.  必要なPythonパッケージをインストールします。
    ```bash
    pip install -r requirements.txt
    ```
3.  バックエンドサーバーを起動します。
    ```bash
    uvicorn main:app --reload
    ```
    サーバーはデフォルトで `http://127.0.0.1:8000` で起動します。

### 3. フロントエンドへのアクセス

バックエンドサーバーが起動したら、Webブラウザで以下のURLにアクセスしてください。

```
http://127.0.0.1:8000/
```

## 使用方法

Webインターフェースにアクセスすると、ドローンのステータスが表示され、以下の操作が可能です。

*   **接続ボタン**: ドローンへの接続を試みます。
*   **アームボタン**: ドローンのモーターをアームします。自動的に `GUIDED` モードに設定されます。
*   **離陸**: 離陸高度を入力し、ボタンをクリックするとドローンが離陸します。自動的に `GUIDED` モードに設定されます。
*   **移動**: 緯度、経度、高度を入力し、ボタンをクリックするとドローンがその位置へ移動します。
*   **着陸**: ドローンを着陸させます。
*   **モード設定**: ドロップダウンからフライトモードを選択し、ボタンをクリックするとモードが変更されます。

ドローンの現在位置は地図上にマーカーで表示され、ステータスパネルには詳細な情報がリアルタイムで更新されます。